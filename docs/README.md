# Go-Agent (Lattice) 项目文档

欢迎查阅 Go-Agent 项目的中文技术文档。本文档库提供了全面的项目架构、代码分析和使用指南。

---

## 📚 文档目录

### 1. [项目架构文档](./项目架构文档.md)

**适合人群**：新接触项目的开发者、架构师、技术决策者

**内容概要**：
- 项目整体架构设计与核心理念
- 各层次模块的职责划分
- Agent、ADK、Memory、Models、Tools、SubAgents、Swarm 等核心模块详解
- 模块间的依赖关系与协作流程
- 关键流程分析（初始化、对话生成、记忆检索、工具调用等）
- 技术栈与性能优化特性

**重点章节**：
- 整体架构设计（理解系统全貌）
- 核心模块详解（深入各组件职责）
- 模块间协作关系（掌握数据流向）
- 关键流程分析（理解核心功能实现）

---

### 2. [模块代码详解](./模块代码详解.md)

**适合人群**：需要深入理解源码的开发者、贡献者

**内容概要**：
- Agent 核心模块源码分析
  - 结构体设计与字段说明
  - `New()`、`Generate()`、`Checkpoint()` 等关键方法实现
  - 工具调用编排机制
  - 缓存优化策略
- ADK 模块源码分析
  - 依赖注入容器实现
  - Module 接口与 Provider 模式
  - Bootstrap 流程
- Memory 记忆系统源码分析
  - Engine 核心算法（重要性评分、时间衰减、MMR 去重）
  - 检索与评分机制
  - 修剪策略
- Models 模型层源码分析
  - 统一接口设计
  - Gemini、Claude、Ollama 等实现
  - Cached Model 装饰器
- Tools 工具系统源码分析
  - StaticToolCatalog 实现
  - UTCP 集成
- 性能优化实现细节
  - LRU Cache 实现
  - MIME 规范化缓存
  - 预分配缓冲区优化

**重点章节**：
- Agent 核心模块代码分析（核心协调逻辑）
- Memory 记忆系统代码分析（RAG 算法实现）
- 性能优化实现细节（理解优化技巧）

---

### 3. [使用指南与最佳实践](./使用指南与最佳实践.md)

**适合人群**：实际使用框架的应用开发者

**内容概要**：
- 快速开始
  - 环境准备
  - 最简示例
  - 使用 ADK 的快速示例
- 常见使用场景
  - 简单对话机器人
  - 带工具的智能体
  - 多智能体协同
  - Agent 状态持久化
  - UTCP 工具调用与 CodeMode
- 最佳实践
  - 模型选择策略
  - 记忆系统配置
  - 上下文管理
  - 工具设计原则
  - 错误处理模式
  - 性能优化技巧
- 配置指南
  - 环境变量完整列表
  - 配置文件示例
- 故障排查
  - 常见问题诊断
  - 解决方案
- 性能调优
  - 基准测试
  - 监控与指标

**重点章节**：
- 常见使用场景（快速上手）
- 最佳实践（避免踩坑）
- 故障排查（解决问题）

---

## 🚀 [快速导航]()

### 根据您的需求选择文档

| 您想... | 推荐阅读 |
|---------|---------|
| 了解项目整体架构 | [项目架构文档 - 整体架构设计](./项目架构文档.md#整体架构设计) |
| 理解 Agent 如何工作 | [项目架构文档 - Agent 模块](./项目架构文档.md#1-agent-模块-核心层) |
| 深入研究源码实现 | [模块代码详解](./模块代码详解.md) |
| 快速搭建第一个 Agent | [使用指南 - 快速开始](./使用指南与最佳实践.md#快速开始) |
| 学习如何使用工具 | [使用指南 - 场景2: 带工具的智能体](./使用指南与最佳实践.md#场景-2-带工具的智能体) |
| 实现多智能体协同 | [使用指南 - 场景3: 多智能体协同](./使用指南与最佳实践.md#场景-3-多智能体协同) |
| 优化性能 | [使用指南 - 性能调优](./使用指南与最佳实践.md#性能调优) |
| 解决问题 | [使用指南 - 故障排查](./使用指南与最佳实践.md#故障排查) |
| 理解记忆系统算法 | [模块代码详解 - Memory 记忆系统](./模块代码详解.md#memory-记忆系统代码分析) |
| 了解 CodeMode 机制 | [项目架构文档 - CodeMode 模式](./项目架构文档.md#codemode-模式) |

---

## 📖 阅读建议

### 新手推荐路径

1. **第一步**：阅读 [项目架构文档 - 项目概述](./项目架构文档.md#项目概述)，了解框架的设计理念
2. **第二步**：跟随 [使用指南 - 快速开始](./使用指南与最佳实践.md#快速开始) 搭建第一个 Agent
3. **第三步**：学习 [使用指南 - 常见使用场景](./使用指南与最佳实践.md#常见使用场景)，理解实际应用
4. **第四步**：查阅 [使用指南 - 最佳实践](./使用指南与最佳实践.md#最佳实践)，掌握开发规范
5. **第五步**：深入 [项目架构文档 - 核心模块详解](./项目架构文档.md#核心模块详解)，全面理解系统

### 进阶开发者路径

1. **理解架构**：[项目架构文档 - 整体架构设计](./项目架构文档.md#整体架构设计)
2. **模块深入**：[模块代码详解](./模块代码详解.md) 逐个模块研读
3. **性能优化**：[模块代码详解 - 性能优化实现细节](./模块代码详解.md#性能优化实现细节)
4. **高级场景**：[使用指南 - UTCP 工具调用与 CodeMode](./使用指南与最佳实践.md#场景-5-utcp-工具调用与-codemode)
5. **贡献代码**：基于对源码的理解参与开发

### 架构师/技术决策者路径

1. **核心理念**：[项目架构文档 - 设计理念](./项目架构文档.md#设计理念)
2. **技术选型**：[项目架构文档 - 技术栈与依赖](./项目架构文档.md#技术栈与依赖)
3. **模块职责**：[项目架构文档 - 核心模块详解](./项目架构文档.md#核心模块详解)
4. **性能特性**：[项目架构文档 - 性能优化技术](./项目架构文档.md#性能优化技术)
5. **最佳实践**：[使用指南 - 最佳实践](./使用指南与最佳实践.md#最佳实践)

---

## 🎯 核心概念速查

### Agent (智能体)
协调 LLM、记忆、工具和子智能体的核心组件。

**关键文档**：
- [项目架构 - Agent 模块](./项目架构文档.md#1-agent-模块-核心层)
- [代码详解 - Agent 核心模块](./模块代码详解.md#agent-核心模块代码分析)

### ADK (Agent Development Kit)
模块化的依赖注入容器，提供声明式配置方式。

**关键文档**：
- [项目架构 - ADK 模块](./项目架构文档.md#2-adk-模块-agent-development-kit)
- [代码详解 - ADK 模块](./模块代码详解.md#adk-模块代码分析)

### Memory (记忆系统)
基于 RAG 的智能记忆，支持语义检索、重要性评分和自动修剪。

**关键文档**：
- [项目架构 - Memory 模块](./项目架构文档.md#3-memory-模块-记忆系统)
- [代码详解 - Memory 记忆系统](./模块代码详解.md#memory-记忆系统代码分析)

### Tools (工具系统)
允许 Agent 调用外部功能的标准化接口。

**关键文档**：
- [项目架构 - Tools 模块](./项目架构文档.md#5-tools-模块-工具系统)
- [使用指南 - 工具设计原则](./使用指南与最佳实践.md#4-工具设计原则)

### UTCP (Universal Tool Calling Protocol)
通用工具调用协议，支持智能体间通信和远程工具调用。

**关键文档**：
- [项目架构 - UTCP 集成](./项目架构文档.md#utcp-集成)
- [使用指南 - UTCP 工具调用](./使用指南与最佳实践.md#场景-5-utcp-工具调用与-codemode)

### CodeMode
允许 LLM 生成 Go 代码来编排工具调用的高级功能。

**关键文档**：
- [项目架构 - CodeMode 模式](./项目架构文档.md#codemode-模式)
- [cmd/example/README.md](../cmd/example/README.md#codemode-pattern-explained)

---

## 🛠️ 代码示例索引

### 完整示例程序

项目的 `cmd/example/` 目录包含丰富的示例代码：

| 示例 | 文件 | 说明 |
|------|------|------|
| CodeMode 工具编排 | [cmd/example/codemode/main.go](../cmd/example/codemode/main.go) | 演示 CodeMode 如何生成代码调用工具 |
| 多智能体工作流 | [cmd/example/codemode_utcp_workflow/main.go](../cmd/example/codemode_utcp_workflow/main.go) | 多个专业智能体协同工作 |
| 智能体间通信 | [cmd/example/agent_as_tool/main.go](../cmd/example/agent_as_tool/main.go) | 层级架构的智能体委派 |
| 状态持久化 | [cmd/example/checkpoint/main.go](../cmd/example/checkpoint/main.go) | Checkpoint 和 Restore 演示 |
| UTCP CodeMode | [cmd/example/agent_as_utcp_codemode/main.go](../cmd/example/agent_as_utcp_codemode/main.go) | 完整的 UTCP 集成 |

### 文档内嵌示例

所有文档中都包含大量代码示例，特别是 [使用指南与最佳实践](./使用指南与最佳实践.md) 提供了完整的可运行代码。

---

## 📊 项目概况

### 核心特性

- ✅ **模块化架构**：通过可复用模块声明式配置
- ✅ **多智能体支持**：专业智能体协同工作
- ✅ **丰富的工具系统**：标准化工具接口
- ✅ **智能记忆**：RAG 驱动的语义检索
- ✅ **模型无关性**：支持 Gemini、Claude、Ollama 等
- ✅ **UTCP 就绪**：一流的通用工具调用协议支持
- ✅ **高性能**：LRU 缓存、预分配缓冲区等优化

### 性能亮点

- **10-50x** MIME 规范化性能提升
- **40-60%** 内存分配减少
- **184 ns/op** LRU 缓存操作
- **30-50%** 字符串操作优化

详见：[PERFORMANCE_SUMMARY.md](../PERFORMANCE_SUMMARY.md)

---

## 🤝 贡献与反馈

### 文档改进

如果您发现文档中的错误或有改进建议，欢迎：

1. 提交 Issue 描述问题
2. 提交 Pull Request 修正错误
3. 通过邮件联系维护者

### 文档维护

本文档库由社区维护，最后更新时间：2026-02-14

---

## 📝 许可证

本项目遵循 [LICENSE](../LICENSE) 中规定的许可证。

---

## 🔗 相关资源

- **项目仓库**：[GitHub - go-agent](https://github.com/Protocol-Lattice/go-agent)
- **官方文档**：[Go Reference](https://pkg.go.dev/github.com/Protocol-Lattice/go-agent)
- **示例代码**：[cmd/example/](../cmd/example/)
- **性能报告**：[PERFORMANCE_SUMMARY.md](../PERFORMANCE_SUMMARY.md)

---

**祝您使用愉快！** 🎉

如有任何问题，请随时查阅相关文档或联系社区。
